//source for multiple players: https://stackoverflow.com/questions/38906568/youtube-api-multiple-videos-with-events
//source for track current play time: https://gist.github.com/mangreen/607fcc6c84379c2025ae
 
// This code loads the IFrame Player API code asynchronously.
var tag = document.createElement('script');

tag.src = "https://www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

// This function creates an <iframe> (and YouTube player)
//    after the API code downloads.
var playerDivs = document.querySelectorAll(".player"); // get .player nodes
var players = new Array(playerDivs.length);
var waypoints = new Array(playerDivs.length);

// when youtube stuff is ready
function onYouTubeIframeAPIReady() {  
  // create yt players
    playerDivs.forEach(function(e, i) { // forEach ...
        players[i] = new YT.Player(e.id, {
            height: '350',
            width: '700',
            videoId: plist[i],
            events: { /* no events set */ }
        })
    })  
}

function playDuration(player,start,end){
    player.seekTo(start);
    player.playVideo();
    var currentTime;
    var timerId=setInterval(()=>{
        currentTime = player.getCurrentTime();
        if(currentTime>=end){
            player.pauseVideo();
            clearInterval(timerId);
        }
    },100);
}
